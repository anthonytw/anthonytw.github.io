<!doctype html>

<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Microcirculatory Bloodflow Analysis - Anthony Wertz</title>
<meta name="description" content="Video processing and analysis to correlate changes in microcirculation with disease state.">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Anthony Wertz">
<meta property="og:title" content="Microcirculatory Bloodflow Analysis">
<meta property="og:url" content="https://me.anthonywertz.com/projects/2017-01-mcba/">


  <meta property="og:description" content="Video processing and analysis to correlate changes in microcirculation with disease state.">



  <meta property="og:image" content="https://me.anthonywertz.com/assets/projects/prj_mcba.gif">





  <meta property="article:published_time" content="2024-06-20T15:07:49-04:00">





  

  


<link rel="canonical" href="https://me.anthonywertz.com/projects/2017-01-mcba/">












<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Anthony Wertz Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script type="text/javascript">
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    

<link rel="stylesheet" href="/assets/css/bib.css">


<link rel="stylesheet" href="/assets/css/tweaks.css" />
  </head>

  <body class="layout--single wide">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Anthony Wertz
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/"
                
                
              >About me</a>
            </li><li class="masthead__menu-item">
              <a
                href="/activities/"
                
                
              >Activities</a>
            </li><li class="masthead__menu-item">
              <a
                href="/projects/"
                
                
              >Projects</a>
            </li><li class="masthead__menu-item">
              <a
                href="/cv/"
                
                
              >CV</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
        <img src="/assets/projects/prj_mcba.gif"
             alt="">
      
      <h3>Role</h3>
      <p>Research software developer</p>

      
    
      
      <h3>Responsibilities</h3>
      <p>Reimplement and optimize research code for batch processing and analyzing microcirculation videos with a user friendly web UI.</p>

      
    
    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Microcirculatory Bloodflow Analysis">
    <meta itemprop="description" content="Video processing and analysis to correlate changes in microcirculation with disease state.">
    <meta itemprop="datePublished" content="2024-06-20T15:07:49-04:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://me.anthonywertz.com/projects/2017-01-mcba/" itemprop="url">Microcirculatory Bloodflow Analysis
</a>
          </h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>Advances in signal processing and miniaturization of sensors and electronics have allowed biomedical technology to improve by leaps and bounds in the last decade.
Processing imaging sensor data in particular has made strides in helping to analyze and understand complicated and noisy sensor data in radiology, tomography, among others.
In the <a href="autonlab.org">Auton Lab</a> I had the opportunity to look at a measurement I was much less familiar with: capillary bloodflow.</p>

<figure>
<div class="project-gallery third ">
  
  <div>
    
      <a href="/assets/projects/ss_mcba.png">
          <img src="/assets/projects/ss_mcba.png" alt="Figure 1: MCBA web interface for video processing and analysis." />
      </a>
    
    
      <p>Figure 1: MCBA web interface for video processing and analysis.
</p>
    
    </div>
  
  <div>
    
      <a href="/assets/projects/prj_mcba_mag.mp4">
          <img src="/assets/projects/prj_mcba.gif" alt="Figure 2: Magnified microcirculatory flow to highlight clear bloodflow." />
      </a>
    
    
      <p>Figure 2: Magnified microcirculatory flow to highlight clear bloodflow.
</p>
    
    </div>
  
  <div>
    
      <a href="/assets/projects/prj_mcba_ves.mp4">
          <img src="/assets/projects/prj_mcba_vess.gif" alt="Figure 3: Stabilized video with vessel overlay." />
      </a>
    
    
      <p>Figure 3: Stabilized video with vessel overlay.
</p>
    
    </div>
  
</div>
</figure>

<p>I had the great privilege of working closely with <a href="https://scholar.google.com/citations?hl=en&amp;user=8gAliWUAAAAJ">Dr. Chao Liu</a>, who was investigating computer vision techniques to process video taken of the microcirculation and extract quantifiable metrics to be used in the prediction of disease state.
My role was to use my background in real-time software development to reimplement the processing and analysis pipeline to batch process many videos efficiently on a server backend and expose a frontend web interface for physician researchers to upload and process their own videos.
This involved a lot of interesting challenges: first in understanding and reimplementing the processing pipeline; then in building an efficient server-side implementation; and finally in designing and deploying a user-friendly interface.</p>

<p>At a high level the pipeline consisted of a few important steps:</p>

<ol>
  <li>Exposure throughout a video was normalized to a baseline to reduce processing mistakes due to changes in illumination and to standardize comparison across different videos;</li>
  <li>Video stabilization was performed to reduce noise due to camera or tissue movement;</li>
  <li>Background subtraction and motion magnification was performed to highlight the moving entities in the video (e.g., the blood cells themselves);</li>
  <li>Vessel center lines were identified to allow for flow quantification;</li>
  <li>Local vessel flow rates and patterns were identified and aggregated to provide some quantified metrics for understanding the microcirculation.</li>
</ol>

<p>Efficient implementation required the use of optimized vision and linear algebra libraries, in this case OpenCV and Eigen3 using Intel’s BLAS implementation.
It also required implementation using CUDA to run on NVIDIA GPUs for bulk processing of dense video data.
Finally, where possible, multithreading was used to parallelize CPU-bound tasks.</p>

<p>All of this made available to physicians through a web user interface, including both a REST framework to interface with the backend processing pipeline and a front-facing web interface.</p>

<p>If you want to learn more about this method, I highly recommend checking out Chao’s article in CVPR <a class="citation" href="#ChaoLiu2015">(Liu et al., 2015)</a>.</p>

<ol class="bibliography"><li><div class="text-justify">
    <span id="ChaoLiu2015">Liu, C., Gomez, H., Narasimhan, S., Dubrawski, A., Pinsky, M. R., &amp; Zuckerbraun, B. (2015). Real-time visual analysis of microvascular blood flow for critical care. <i>2015 IEEE Conference on Computer Vision and Pattern Recognition (CVPR)</i>, 2217–2225. https://doi.org/10.1109/CVPR.2015.7298834</span>
</div>
<button class="button bibtex" onclick="toggleBibtexChaoLiu2015()">Bibtex</button>


<a href="http://doi.org/10.1109/CVPR.2015.7298834" target="_blank"><input class="button doi" type="button" value="doi" /></a>



<a href="https://www.cv-foundation.org/openaccess/content_cvpr_2015/html/Liu_Real-Time_Visual_Analysis_2015_CVPR_paper.html" target="_blank"><input class="button link" type="button" value="link" /></a>









<div id="aChaoLiu2015" style="display: none;">
    <figure class="highlight"><pre><code class="language-bibtex" data-lang="bibtex"><span class="nc">@inproceedings</span><span class="p">{</span><span class="nl">ChaoLiu2015</span><span class="p">,</span>
  <span class="na">author</span> <span class="p">=</span> <span class="s">{Liu, Chao and Gomez, Hernando and Narasimhan, Srinivasa and Dubrawski, Artur and Pinsky, Michael R. and Zuckerbraun, Brian}</span><span class="p">,</span>
  <span class="na">booktitle</span> <span class="p">=</span> <span class="s">{2015 IEEE Conference on Computer Vision and Pattern Recognition (CVPR)}</span><span class="p">,</span>
  <span class="na">title</span> <span class="p">=</span> <span class="s">{Real-time visual analysis of microvascular blood flow for critical care}</span><span class="p">,</span>
  <span class="na">year</span> <span class="p">=</span> <span class="s">{2015}</span><span class="p">,</span>
  <span class="na">volume</span> <span class="p">=</span> <span class="s">{}</span><span class="p">,</span>
  <span class="na">number</span> <span class="p">=</span> <span class="s">{}</span><span class="p">,</span>
  <span class="na">pages</span> <span class="p">=</span> <span class="s">{2217-2225}</span><span class="p">,</span>
  <span class="na">keywords</span> <span class="p">=</span> <span class="s">{Videos;Blood;Skeleton;Imaging;Heart beat;Noise;Hemorrhaging}</span><span class="p">,</span>
  <span class="na">doi</span> <span class="p">=</span> <span class="s">{10.1109/CVPR.2015.7298834}</span><span class="p">,</span>
  <span class="na">url</span> <span class="p">=</span> <span class="s">{https://www.cv-foundation.org/openaccess/content_cvpr_2015/html/Liu_Real-Time_Visual_Analysis_2015_CVPR_paper.html}</span>
<span class="p">}</span></code></pre></figure>
</div>
<script>
    function toggleBibtexChaoLiu2015 (parameter) {
        var x = document.getElementById('aChaoLiu2015');
        if (x.style.display === 'none') {
            x.style.display = 'block';
        } else {
            x.style.display = 'none';
        }
    }
</script></li></ol>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2024-06-20T15:07:49-04:00">20 June 2024</time></p>

      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Microcirculatory+Bloodflow+Analysis%20https%3A%2F%2Fme.anthonywertz.com%2Fprojects%2F2017-01-mcba%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fme.anthonywertz.com%2Fprojects%2F2017-01-mcba%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://me.anthonywertz.com/projects/2017-01-mcba/" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/projects/2015-09-rtba/" class="pagination--pager" title="Real-time Bayesian Aggregation
">Previous</a>
    
    
      <a href="/projects/2018-01-heme/" class="pagination--pager" title="Fast Detection of Hemorrhagic Shock
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

      
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
    
    
    <li><a href="mailto:me@mail.anthonywertz.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square"
          aria-hidden="true"></i> Email</a></li>
    
    
    
    <li><a href="https://me.anthonywertz.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-link"
          aria-hidden="true"></i> Website</a></li>
    
    
    
    <li><a href="https://github.com/anthonytw" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github"
          aria-hidden="true"></i> GitHub</a></li>
    
    
    
    <li><a href="https://linkedin.com/in/anthonytw" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin"
          aria-hidden="true"></i> LinkedIn</a></li>
    
    
    

    
    <li><a
        href="/feed.xml"><i
          class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2024 <a
    href="https://me.anthonywertz.com">Anthony Wertz</a>.</div>
      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>









  </body>
</html>
